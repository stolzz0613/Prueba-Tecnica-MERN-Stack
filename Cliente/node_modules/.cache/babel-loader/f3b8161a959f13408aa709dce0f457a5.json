{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/andresbustos/mern/Cliente/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/andresbustos/mern/Cliente/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/andresbustos/mern/Cliente/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer}from'react';import proyectoReducer from'./proyectoReducer';import proyectoContext from'./proyectoContext';import{FORMULARIO_PROYECTO,OBTENER_PROYECTOS,AGREGAR_PROYECTO,VALIDAR_FORMULARIO,PROYECTO_ACTUAL,PROYECTO_ERROR,ELIMINAR_PROYECTO}from'../../types';import clienteAxios from'../../config/axios';var ProyectoState=function ProyectoState(props){var proyectos=[{id:1,nombre:'Tienda Virtual'},{id:2,nombre:'Intraner'},{id:3,nombre:'Diseño de Sitio Web'},{id:4,nombre:'MERN'}];var initialState={formulario:false,proyectos:[],errorformulario:false,proyecto:null,mensaje:null};//Dispatch para ejecutar las acciones\nvar _useReducer=useReducer(proyectoReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];//Serie de funciones Crud\nvar mostrarFormulario=function mostrarFormulario(){dispatch({type:FORMULARIO_PROYECTO});};//Obtener Proyectos\nvar obtenerProyectos=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var resultado,alerta;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return clienteAxios.get('api/proyectos');case 3:resultado=_context.sent;dispatch({type:OBTENER_PROYECTOS,payload:resultado.data.proyectos});_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);alerta={msg:'Hubo un error',categoria:'alerta-error'};dispatch({type:PROYECTO_ERROR,payload:alerta});case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function obtenerProyectos(){return _ref.apply(this,arguments);};}();//Agregar nuevo proyecto\nvar agregarProyecto=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(proyecto){var resultado,alerta;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return clienteAxios.post('/api/proyectos',proyecto);case 3:resultado=_context2.sent;console.log(resultado);//Insertar el proyecto en el state\ndispatch({type:AGREGAR_PROYECTO,payload:resultado.data});_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);alerta={msg:'Hubo un error',categoria:'alerta-error'};dispatch({type:PROYECTO_ERROR,payload:alerta});case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function agregarProyecto(_x){return _ref2.apply(this,arguments);};}();//Validar formulario\nvar mostrarError=function mostrarError(){dispatch({type:VALIDAR_FORMULARIO});};//Selecciona el proyecto que el usuario dio click\nvar proyectoActual=function proyectoActual(proyectoId){dispatch({type:PROYECTO_ACTUAL,payload:proyectoId});};//Elimina un proyecto\nvar eliminarProyecto=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(proyectoId){var alerta;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return clienteAxios.delete(\"/api/proyectos/\".concat(proyectoId));case 3:dispatch({type:ELIMINAR_PROYECTO,payload:proyectoId});_context3.next=10;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);alerta={msg:'Hubo un error',categoria:'alerta-error'};dispatch({type:PROYECTO_ERROR,payload:alerta});case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function eliminarProyecto(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(proyectoContext.Provider,{value:{proyectos:state.proyectos,formulario:state.formulario,errorformulario:state.errorformulario,proyecto:state.proyecto,mensaje:state.mensaje,mostrarFormulario:mostrarFormulario,obtenerProyectos:obtenerProyectos,agregarProyecto:agregarProyecto,mostrarError:mostrarError,proyectoActual:proyectoActual,eliminarProyecto:eliminarProyecto},children:props.children});};export default ProyectoState;","map":{"version":3,"sources":["/Users/andresbustos/mern/Cliente/src/context/proyectos/ProyectoState.js"],"names":["React","useReducer","proyectoReducer","proyectoContext","FORMULARIO_PROYECTO","OBTENER_PROYECTOS","AGREGAR_PROYECTO","VALIDAR_FORMULARIO","PROYECTO_ACTUAL","PROYECTO_ERROR","ELIMINAR_PROYECTO","clienteAxios","ProyectoState","props","proyectos","id","nombre","initialState","formulario","errorformulario","proyecto","mensaje","state","dispatch","mostrarFormulario","type","obtenerProyectos","get","resultado","payload","data","alerta","msg","categoria","agregarProyecto","post","console","log","mostrarError","proyectoActual","proyectoId","eliminarProyecto","delete","children"],"mappings":"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","sourcesContent":["import React, {useReducer} from 'react';\n\nimport proyectoReducer from './proyectoReducer';\nimport proyectoContext from './proyectoContext';\nimport {\n    FORMULARIO_PROYECTO, \n    OBTENER_PROYECTOS,\n    AGREGAR_PROYECTO,\n    VALIDAR_FORMULARIO,\n    PROYECTO_ACTUAL,\n    PROYECTO_ERROR,\n    ELIMINAR_PROYECTO,\n} from '../../types';\nimport clienteAxios from '../../config/axios';\n\n\nconst ProyectoState = props => {\n\n    const proyectos = [\n        {id: 1, nombre: 'Tienda Virtual'},\n        {id: 2, nombre: 'Intraner'},\n        {id: 3, nombre: 'Diseño de Sitio Web'},\n        {id: 4, nombre: 'MERN'},\n    ];\n\n    const initialState = {\n        formulario: false,\n        proyectos: [],\n        errorformulario: false,\n        proyecto: null,\n        mensaje: null,\n    }\n\n    //Dispatch para ejecutar las acciones\n    const [state, dispatch] = useReducer(proyectoReducer, initialState)\n\n    //Serie de funciones Crud\n    const mostrarFormulario = () => {\n        dispatch({\n            type: FORMULARIO_PROYECTO\n        })\n    }\n\n    //Obtener Proyectos\n    const obtenerProyectos = async () => {\n        try {\n            const resultado = await clienteAxios.get('api/proyectos');\n\n            dispatch({\n                type: OBTENER_PROYECTOS,\n                payload: resultado.data.proyectos,\n            })\n        } catch (error) {\n            const alerta = {\n                msg: 'Hubo un error',\n                categoria: 'alerta-error',\n            }\n\n            dispatch({\n                type: PROYECTO_ERROR,\n                payload: alerta,\n            })\n        }\n    }\n\n    //Agregar nuevo proyecto\n    const agregarProyecto = async proyecto => {\n        try {\n            const resultado = await clienteAxios.post('/api/proyectos', proyecto);\n            console.log(resultado);\n            //Insertar el proyecto en el state\n            dispatch({\n                type: AGREGAR_PROYECTO,\n                payload: resultado.data\n            })\n        } catch (error) {\n            const alerta = {\n                msg: 'Hubo un error',\n                categoria: 'alerta-error',\n            }\n\n            dispatch({\n                type: PROYECTO_ERROR,\n                payload: alerta,\n            })\n        }\n    }\n\n    //Validar formulario\n    const mostrarError = () => {\n        dispatch({\n            type: VALIDAR_FORMULARIO\n        })\n    }\n\n    //Selecciona el proyecto que el usuario dio click\n    const proyectoActual = proyectoId => {\n        dispatch({\n            type: PROYECTO_ACTUAL,\n            payload: proyectoId,\n        })\n    }\n\n    //Elimina un proyecto\n    const eliminarProyecto = async proyectoId => {\n        try {\n            await clienteAxios.delete(`/api/proyectos/${proyectoId}`);\n\n            dispatch({\n                type: ELIMINAR_PROYECTO,\n                payload: proyectoId,\n            })\n        } catch (error) {\n            const alerta = {\n                msg: 'Hubo un error',\n                categoria: 'alerta-error',\n            }\n\n            dispatch({\n                type: PROYECTO_ERROR,\n                payload: alerta,\n            })\n        }\n    }\n\n    return(\n        <proyectoContext.Provider\n            value = {{\n                proyectos: state.proyectos,\n                formulario : state.formulario,\n                errorformulario: state.errorformulario,\n                proyecto: state.proyecto,\n                mensaje: state.mensaje,\n                mostrarFormulario,\n                obtenerProyectos,\n                agregarProyecto,\n                mostrarError,\n                proyectoActual,\n                eliminarProyecto,\n            }}\n        >\n            {props.children}\n        </proyectoContext.Provider>\n    )\n}\n\nexport default ProyectoState;"]},"metadata":{},"sourceType":"module"}